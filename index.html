<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Refugive.com</title>
        <meta name="description" content="A refugee may need something. A local might have a spare item. Use this website to get in touch.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/static/css/bootstrap.css">
        <script src="/static/vendor/jquery.js"></script>
        <script src="/static/bootstrap.js"></script>
        <script type="text/html" id="about-template">
          <div class="intro">
              <h1>Refugive.com: <%=i18n.T('a marketplace for refugees and neighbours')%></h1>
          </div>
          <div class="main itempage">
                <p>
                  <%=i18n.T('Refugive.com is a website created and used by the people from the neighbourhood.')%>
                  <%=i18n.T('This site is created to match the wishes of refugees to the openheartness from the locals.')%>
                  <%=i18n.T('You may found clothes, books, games etc.')%>
                  <%=i18n.T('For examples: how about cooking a meal or doing sports together?')%>
                </p>
                <p>
                  <%=i18n.T('Do you need something (as a refugee) or you have clothes spare (as a local)?')%>
                  <%=i18n.T('Take a look on Refugive.com and meet your new neighbours from there!')%>
                  <%=i18n.T('If you are a refugee, then it is for you free to advertise your needs and wishes on it.')%>
                  <%=i18n.T('It is also free for the locals, but offers should be made within a walking distance from the refugee center.')%>
                  <%=i18n.T('No money should be traded for exhange the goods.')%>
                </p>
                <p>
                  <%=i18n.T('Refugive.com was started by a group of people in Bezuidenhout (The Hague) in order to help refugees from their neighbourhood.')%>
                  <%=i18n.T('Refugive.com is a non-profit website.')%>
                </p>
                <p>
                  <%=i18n.T('Best regards,')%><br>Jasper, Jeroen, Krista, Maaike <%=i18n.T('and')%> Tijs
                </p>
          </div>
        </script>

        <script type="text/html" id="home-template">
          <div class="intro">
              <p>
                <%=i18n.T('A refugee may need something.')%>
                <%=i18n.T('A local may have a spare item.')%>
                <%=i18n.T('You can use this website to get in touch with each other.')%>
              </p>
          </div>
            <% if (authenticated) { %>
              <br>
              <button class="add btn btn-default"><%=i18n.T('Add An Project')%></button>
            <% } %>
            <% if (items !== null) { %>
              <div class="items">
                <% _.each(items.models, function (item) { %>
                  <hr>
                  <div class="factwrap">
                    <a href="#item/<%- item.get('id') %>">
                      <h3 dir="ltr"><%=item.get('title')%></h3>
                    </a>
                    <% if (item.get('image') !== '') { %>
                      <div class="imgwrap">
                        <img src="https://res.cloudinary.com/dvrrqjzay/image/upload/c_fill,h_300,w_400/<%=item.get('image')%>.jpg">
                      </div>
                    <% } %>
                  </div>
                <% }); %>
              </div>
            <% } %>
        </script>

        <script type="text/html" id="login-template">
          <div class="intro">
              <p>
                <%=i18n.T('A refugee may need something.')%>
                <%=i18n.T('A local may have a spare item.')%>
                <%=i18n.T('You can use this website to get in touch with each other.')%>
              </p>
          </div>
            <form action="" method="post">
              <label for="id_email"><%=i18n.T('E-mail')%>:</label>
              <input class="form-control" id="id_email" type="text" name="email" pattern="^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$" required />
              <label for="id_password"><%=i18n.T('Password')%>:</label>
              <input class="form-control" id="id_password" type="password" name="password" required />
              <button type="submit" class="btn btn-dafault"><%=i18n.T('Submit')%></button>
              <a href="#/password/reset"><%=i18n.T('I lost my password')%></a>
            </form>
        </script>

        <script type="text/html" id="password-template">
            <form action="/api/resetpassword" method="post">
              <input name="csrfmiddlewaretoken" value="<%=csrf_token.get('csrf_token')%>" type="hidden">
              <% if (key === "reset") { %>
                <h1><%=i18n.T('So you forgot your password?')%></h1>
                <p><%=i18n.T('Do not worry!')%> <%=i18n.T('Fill in your email address below and we will send you a link to reset your password.')%></p>
                <label for="id_email"><%=i18n.T('E-mail')%>:</label>
                <input class="form-control" id="id_email" type="text" name="email" pattern="^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$" required />
              <% } else { %>
                <input type="hidden" name="key" value="<%=key%>">
                <h1><%=i18n.T('So you want to change your password?')%></h1>
                <p><%=i18n.T('Enter your new password here')%>:</p>
                <input class="form-control" id="id_password" type="password" name="password" required maxlength="50"/>
              <% } %>
              <button type="submit" class="btn btn-dafault"><%=i18n.T('Submit')%></button>
            </form>
        </script>

        <script type="text/html" id="header-template">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarCollapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">Git</a>
            </div>
            <div class="collapse navbar-collapse" id="navbarCollapse">
              <ul class="nav navbar-nav">
                <li><a href="#/help"><%=i18n.T('Help')%></a></li>
                <% if (authenticated) { %>
                  <li><a href="#">Activities</a></li>
                  <li><a href="#">Milestones</a></li>
                  <li><a href="#" class="logout"><%=i18n.T('Logout')%></a></li>
                <% } else { %>
                  <li><a href="#/login"><%=i18n.T('Login')%></a></li>
                <% } %>
              </ul>
            </div>
          </div>
        </script>

        <script type="text/html" id="footer-template">
          <hr>
          <div class="container">
              <p><%=i18n.T('What is Refugive.com and how does it work?')%> <a href="#/about"><%=i18n.T('About us')%></a><br/>
                <%=i18n.T('Tips, suggestions, complaints or questions?')%> <%=i18n.T('Please')%> <a href="mailto:xuyi_wang@hotmail.com"><%=i18n.T('give us feedback')%></a>
              </p>
          </div>
        </script>

        <script type="text/html" id="help-template">
          <% if (authenticated) { %>
          <button class="settings btn btn-default"><%=i18n.T('Settings')%></button>
          <% } %>
          <div class="intro">
              <h1><%=i18n.T('Q & A')%></h1>
          </div>
            <strong><p><%=i18n.T('How can I create an account?')%></p></strong>
            <p><%=i18n.T('You can create an account by clicking on Register.')%></p>
            <strong><p><%=i18n.T('How can I add an item?')%></p></strong>
            <p><%=i18n.T('You can add an item by clicking on Add An Item button.')%></p>
            <strong><p><%=i18n.T('How can I change my personal information?')%></p></strong>
            <p><%=i18n.T('You can change your information by click on Settings tab.')%></p>
            <strong><p><%=i18n.T('How can I react on an item?')%></p></strong>
            <p><%=i18n.T('You can react on an item by clicking on Reply button after clicking on the item.')%></p>
        </script>

        <script type="text/html" id="settings-template">
            <form action="/api/adduser" method="post">
              <label for="id_username"><%=i18n.T('Username')%>:</label>
              <input class="form-control" id="id_username" type="text" name="username" value="<%=_.escape(user.get('username'))%>" required/>
              <button type="submit" class="btn btn-dafault"><%=i18n.T('Save')%></button>
              <button class="cancel btn btn-default"><%=i18n.T('Cancel')%></button>
            </form>
        </script>

        <script type="text/html" id="new-user-template">
            <form action="/api/adduser" method="post">
              <input name="csrfmiddlewaretoken" value="<%=csrf_token.get('csrf_token')%>" type="hidden">
              <label for="id_email"><%=i18n.T('E-mail')%>:</label>
              <input class="form-control" id="id_email" type="text" name="email" required pattern="^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$"/>
              <label for="id_username"><%=i18n.T('Username')%>:</label>
              <input class="form-control" id="id_username" type="text" name="username" required/>
              <button type="submit" class="btn btn-dafault"><%=i18n.T('Save')%></button>
            </form>
        </script>

        <script type="text/html" id="new-item-template">
            <form action="/api/additem" method="post" enctype="multipart/form-data">
              <label for="id_title"><%=i18n.T('Title')%>:</label>
              <input name="csrfmiddlewaretoken" value="<%=csrf_token.get('csrf_token')%>" type="hidden">
              <input class="form-control" id="id_title" type="text" name="title" maxlength="100" required />
              <label for="id_description"><%=i18n.T('Description')%>:</label>
              <textarea class="form-control" id="id_description" name="description" cols="50"></textarea>
              <input type="hidden" id="id_owner" name="owner" value="<%=owner.get('id')%>">
              <button type="submit" class="btn btn-default"><%=i18n.T('Create')%></button>
              <button class="cancel btn btn-default"><%=i18n.T('Cancel')%></button>
            </form>
        </script>

        <script type="text/html" id="new-message-template">
          <form action="" method="post">
            <label for="id_text"><%=i18n.T('Message')%>:</label>
            <textarea class="form-control" id="id_text" name="text" cols="50"></textarea>
            <input type="hidden" name="owner" value="<%=user.get('url')%>">
            <input type="hidden" name="item" value="http://localhost:8000/api/items/<%=item.get('id')%>">
            <button type="submit" class="btn btn-dafault"><%=i18n.T('Create')%></button>
            <button class="cancel btn btn-dafault"><%=i18n.T('Cancel')%></button>
          </form>
        </script>

        <script type="text/html" id="item-template">
              <h1 dir="ltr"><%=item.get('title')%></h1>
              <input type="hidden" name="id" value="<%=item.get('id')%>">
                <% if (item.get('image') !== '') { %>
                  <img src="https://res.cloudinary.com/dvrrqjzay/image/upload/c_fill,h_300,w_400/<%=item.get('image')%>.jpg">
                <% } %>
                  <p class="desc" dir="ltr">
                    <%=_.escape(item.get('description'))%>
                  </p>
                  <% if (users !== null) { %>
                    <p class="postedby"><%=i18n.T('Offered by')%>
                      <% _.each(users.models, function(user){ %>
                        <% if (user.get('url') === item.get('owner')) { %>
                          <strong><%=_.escape(user.get('username'))%></strong>
                        <% }; %>
                      <% }); %>
                      <%=i18n.T('since')%> <%=item.getDate()%>
                    </p>
                  <% } %>
                  <% _.each(messages.models, function (message) { %>
                    <p>
                      <%=message.get('full_text')%>
                    </p>
                  <% }); %>
                  <button class="add btn btn-dafault"><%=i18n.T('Reply')%></button>
        </script>

        <script type="text/html" id="edit-template">
          <form action="" method="post">
            <button type="submit">Save</button>
            <button type="delete">Delete</button>
            <br/>
            <input type="hidden" name="id" value="<%=item.get('id')%>">
            <label for="id_title">Title:</label>
            <input id="id_title" type="text" name="title" maxlength="100" required value="<%=item.get('title')%>" />
            <label for="id_description">Description:</label>
            <textarea id="id_description" name="description" cols="50"><%=item.get('description')%></textarea>
            <label for="id_image">Picture:</label>
            <input type="file" id="id_image" name="image" accept="image/*">
          </form>
        </script>
    </head>
    <body>
      <div class="container" id="message"></div>
      <div id="content" class="container"></div>
      <script src="vendor/underscore.js"></script>
      <script src="vendor/backbone.js"></script>
      <script id="config" type="text/json">
        {
          "models": {},
          "collections": {},
          "views": {},
          "router": null,
          "apiLogin": "/api/token-auth"
        }
      </script>
      <script src="app.js"></script>
      <script src="models.js"></script>
      <script src="views.js"></script>
      <script src="router.js"></script>
    </body>
</html>
